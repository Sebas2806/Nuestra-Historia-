<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!-- CR√çTICO PARA RESPONSIVIDAD: Asegura que el contenido se escala al ancho del dispositivo -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestra Historia - Un Viaje Mes a Mes</title>
    <!-- Carga de Tailwind CSS para estilos de utilidad -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuentes para el dise√±o Rom√°ntico/Vintage -->
    <style>
        /* Importaci√≥n de fuentes */
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes:wght@400;700&family=Dancing+Script:wght@400..700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap');
        
        /* Paleta de colores Lujosa y Rom√°ntica */
        :root {
            --color-cover: #4B0014; /* Borgo√±a oscuro, casi terciopelo */
            --color-spine: #3A0010; /* Lomo m√°s oscuro */
            --color-paper: #fff8ee; /* Crema suave / marfil */
            --color-paper-shadow: #f0e6d6;
            --color-accent: #C44365; /* Rosa Rub√≠ */
            --color-text: #444444; /* Gris carb√≥n */
            --book-width: 400px; /* Tama√±o por defecto (desktop) */
            --book-height: 550px; 
        }

        /* Estilos generales del cuerpo */
        body {
            font-family: 'Crimson Text', serif; /* Base para el cuerpo */
            background: linear-gradient(135deg, #f7e3c9 0%, #ecd3d3 100%); /* Fondo rosado claro */
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center; 
            align-items: center;
            overflow: hidden;
            perspective: 3000px; 
        }

        /* --- Estilos de Scrollbar Personalizados (Compatible con Chrome, Edge y Safari) --- */
        
        .page-content-scroll::-webkit-scrollbar {
            width: 8px; /* Ancho de la barra de desplazamiento */
        }

        .page-content-scroll::-webkit-scrollbar-track {
            background: var(--color-paper-shadow); /* Fondo de la pista (sutil) */
            border-radius: 10px;
        }

        .page-content-scroll::-webkit-scrollbar-thumb {
            background-color: var(--color-accent); /* Color de la "manija" (Rosa Rub√≠) */
            border-radius: 10px;
            border: 2px solid var(--color-paper-shadow); /* Borde para separarlo de la pista */
        }

        .page-content-scroll::-webkit-scrollbar-thumb:hover {
            background-color: #A0522D; /* Un tono m√°s oscuro en hover para un efecto suave */
        }
        
        /* Para Firefox */
        .page-content-scroll {
            scrollbar-width: thin;
            scrollbar-color: var(--color-accent) var(--color-paper-shadow);
        }

        /* --- Contenedor del Libro (Responsive) --- */
        .book-container {
            width: var(--book-width);
            height: var(--book-height);
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform: rotateY(0deg);
            box-shadow: 20px 20px 60px rgba(0, 0, 0, 0.5), -10px -10px 30px rgba(255, 255, 255, 0.1);
        }
        
        .book-container.open {
            transform: rotateY(30deg); 
            box-shadow: none; 
        }

        /* Media Query para m√≥vil: Reducir tama√±o del libro en pantallas peque√±as */
        @media (max-width: 600px) {
            :root {
                --book-width: 280px;
                --book-height: 400px;
            }
            .book-container {
                 margin: 1rem;
            }
        }

        .book-spine {
            position: absolute;
            width: 35px; 
            height: 100%;
            background-color: var(--color-spine);
            top: 0;
            left: 50%;
            transform: translateX(-50%) rotateY(90deg) translateZ(-17.5px); 
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.7);
        }

        /* --- P√°ginas y Tapas --- */
        .page, .cover-front, .cover-back {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-origin: left center;
            backface-visibility: hidden; 
            transition: transform 1s cubic-bezier(0.5, 0.0, 0.3, 1.0); 
            border-radius: 6px; 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        /* Tapa frontal */
        .cover-front {
            background-color: var(--color-cover);
            transform: translateZ(17.5px) rotateY(0deg); 
            z-index: 100;
            color: var(--color-paper);
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
            box-shadow: 
                inset 0 0 0 8px var(--color-paper), 
                inset 0 0 0 10px #D4AF37, 
                inset 0 0 0 14px var(--color-paper), 
                0 4px 20px rgba(0, 0, 0, 0.4); 
            
            background-image: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, rgba(0, 0, 0, 0.3) 100%);
        }

        .cover-front.flipped {
            transform: rotateY(-180deg) rotateX(-5deg) rotateZ(1deg) translateZ(17.5px);
            transition: transform 1.5s cubic-bezier(0.6, 0.05, 0.3, 0.95); 
        }

        .cover-back {
            background-color: var(--color-spine);
            transform: rotateY(180deg) translateZ(17.5px);
            z-index: 99;
        }

        .pages-block {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transform: translateZ(17.5px);
        }

        .pages-block.hidden-pages {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.5s;
        }

        /* --- Estilo de Papel Envejecido y Tipograf√≠a Interior --- */
        .page {
            background-color: var(--color-paper);
            color: var(--color-text);
            background-image: radial-gradient(circle at 50% 50%, var(--color-paper) 80%, var(--color-paper-shadow) 100%);
            
            box-shadow: inset 0 0 20px rgba(100, 50, 0, 0.15); 
            padding: 2rem;
            line-height: 1.7; 
            font-family: 'Crimson Text', serif; 
            font-size: 1.1rem; 
            
            /* APLICACI√ìN DE FLEXBOX PARA GESTIONAR LA ALTURA DEL CONTENIDO */
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Asegura que el contenido comience desde arriba */
        }

        /* Contenedor del contenido (cuerpo de texto) */
        .page-content-container {
            flex-grow: 1; /* Esto hace que el div ocupe todo el espacio restante */
            min-height: 0; /* Necesario en Flexbox para permitir que el contenido interno se desplace */
            /* Se a√±ade padding-bottom para que el texto no toque el n√∫mero de p√°gina absoluto */
            padding-bottom: 2rem; 
        }
        
        .page.active { 
            z-index: 50; 
            transform: rotateY(0deg); 
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3); 
        }
        
        .page.flipped { 
            z-index: 55; 
            transform: rotateY(-180deg) rotateX(-10deg);
        }
        
        .page.prev-flipped { 
            z-index: 45; 
            transform: rotateY(-180deg);
        }
        
        /* Contenido de la portada */
        .cover-title { 
            font-family: 'Great Vibes', cursive; 
            font-size: 5.5rem; 
            line-height: 1;
            padding: 0 1rem;
            color: #D4AF37; 
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(212, 175, 55, 0.6); 
        }
        .cover-subtitle { 
            font-family: 'Crimson Text', serif;
            font-size: 1.4rem; 
            font-style: italic;
            color: var(--color-paper);
            margin-top: 1rem;
        }

        /* T√çTULOS INTERIORES: Dancing Script (se ajusta la altura de forma natural con flex-shrink: 0) */
        .page-title { 
            color: var(--color-accent);
            border-bottom: 3px double #D4AF37;
            padding-bottom: 8px;
            margin-bottom: 2rem;
            font-size: 2.2rem;
            font-family: 'Dancing Script', cursive; 
            font-weight: 700;
            text-align: center;
            flex-shrink: 0; /* Asegura que no intente crecer */
        }
        
        /* Ajuste de t√≠tulo para m√≥viles */
        @media (max-width: 600px) {
            .cover-title {
                font-size: 4rem;
            }
            .page-title {
                font-size: 1.8rem;
            }
            .page {
                padding: 1.5rem;
                font-size: 1rem;
            }
        }

        /* Destacar el texto fuerte */
        .page p strong {
            color: var(--color-accent);
            font-weight: 600;
        }

        /* --- Estilos de Botones (Rom√°nticos) --- */
        
        .elegant-button {
            font-family: 'Great Vibes', cursive; 
            background-color: #8B4513; 
            color: var(--color-paper); 
            border: 2px solid var(--color-accent); 
            border-radius: 50px; 
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); 
            transition: all 0.3s ease-in-out;
            letter-spacing: 1px;
            font-size: 1.3rem; 
            padding: 0.75rem 2.5rem; 
        }
        .elegant-button:hover {
            background-color: #A0522D; 
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
            transform: translateY(-4px) scale(1.01);
        }

        .nav-button-vibe {
            font-family: 'Dancing Script', cursive;
            background-color: var(--color-accent); 
            color: var(--color-paper); 
            padding: 0.3rem 1rem; 
            border-radius: 9999px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            font-size: 1.4rem;
            font-weight: 700; 
            transition: all 0.2s ease-in-out; 
        }
        .nav-button-vibe:hover:not(:disabled) {
            transform: scale(1.08); 
            background-color: #D87093; 
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
        }
        .nav-button-vibe:disabled {
            opacity: 0.4; 
            cursor: not-allowed;
            transform: scale(1); 
            box-shadow: none;
        }
        
        .page-indicator-style {
            font-family: 'Crimson Text', serif;
            font-weight: 600;
            font-size: 1rem;
            color: #5d4037; 
            font-style: italic;
        }

        .controls-container {
            width: 90%; 
            max-width: 600px;
            padding: 1rem;
        }

    </style>
</head>
<body class="flex flex-col gap-8 justify-center items-center h-screen">

    <!-- Contenedor del Libro 3D -->
    <div id="bookContainer" class="book-container">
        
        <!-- Lomo del libro -->
        <div class="book-spine"></div>

        <!-- Tapa Frontal con T√≠tulo Rom√°ntico. INICIO DE LA HISTORIA -->
        <div id="coverFront" class="cover-front flex flex-col justify-center items-center p-8 text-center">
            
            <p class="cover-title">Nuestra Historia</p>
            <p class="cover-subtitle mt-4">Un Viaje Mes a Mes</p>
            
        </div>

        <!-- Tapa Trasera (Parte trasera de la tapa frontal cuando est√° abierta) -->
        <div class="cover-back"></div>

        <!-- Contenedor de las P√°ginas -->
        <div id="pagesBlock" class="pages-block hidden-pages">
            <!-- Las p√°ginas se generar√°n aqu√≠ por JavaScript -->
        </div>

    </div>

    <!-- Controles y Navegaci√≥n -->
    <div class="controls-container flex flex-col items-center gap-6">
        
        <!-- Bot√≥n Abrir/Cerrar Libro -->
        <button id="toggleBookBtn" onclick="toggleBook()"
            class="elegant-button tracking-wider w-full md:w-auto">
            Abrir Libro
        </button>

        <!-- Controles de Navegaci√≥n -->
        <div id="navigationControls" class="flex justify-between w-full md:w-3/4 max-w-xs opacity-0 pointer-events-none transition-opacity duration-700">
            <button id="prevPageBtn" onclick="prevPage()" disabled
                class="nav-button-vibe flex items-center shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-4 h-4 mr-1">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                </svg>
                Anterior
            </button>
            
            <!-- Indicador de p√°gina -->
            <span id="pageIndicator" class="page-indicator-style self-center">P√°g. 1 / 24</span>
            
            <button id="nextPageBtn" onclick="nextPage()"
                class="nav-button-vibe flex items-center shadow-lg">
                Siguiente
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-4 h-4 ml-1">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
                </svg>
            </button>
        </div>

        <!-- Sonido de pasar p√°gina (PCM base64 audio data) -->
        <audio id="pageTurnSound" src="data:audio/wav;base64,UklGRtD9AABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YUo%2FDQAGBgYGBAgICAkJCQkKCgoLCwsMDAwMDAwNDQ0NDQ0ODg4PDw8PDw8QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBEload="none"></audio>
        
    </div>

    <script type="module">
        // --- Constantes y Variables Globales ---
        
        const bookContainer = document.getElementById('bookContainer');
        const pagesBlock = document.getElementById('pagesBlock');
        const coverFront = document.getElementById('coverFront');
        const toggleBookBtn = document.getElementById('toggleBookBtn');
        const navigationControls = document.getElementById('navigationControls');
        const prevPageBtn = document.getElementById('prevPageBtn');
        const nextPageBtn = document.getElementById('nextPageBtn');
        const pageIndicator = document.getElementById('pageIndicator');
        const pageTurnSound = document.getElementById('pageTurnSound');

        // Estado: INICIA CERRADO por defecto
        let isBookOpen = false; 
        let currentPageIndex = 0;
        
        // --- Contenido de las p√°ginas (24 Meses + Hoy) ---
        // Contenido de ejemplo (dejado intacto)
        const pageContent = [
            { title: "üåô Enero 2024", text: "El 28 de enero de 2024 te vi por primera vez, y aunque todo alrededor parec√≠a normal, dentro de m√≠ algo cambi√≥ para siempre. Fue como si el mundo hubiera hecho silencio para dejarme escucharte mejor. En tu mirada descubr√≠ un brillo que no hab√≠a visto en nadie, y sin entenderlo del todo, supe que ese d√≠a marcaba el inicio de algo grande. No te imaginabas que ese encuentro despert√≥ en m√≠ una esperanza nueva, una calidez que hac√≠a a√±os no sent√≠a. Ese d√≠a naci√≥ una historia que hoy es mi vida entera: <strong>nosotros</strong>." },
            { title: "üíò Febrero 2024", text: "Febrero lleg√≥ con nervios, ilusi√≥n y ganas de acercarme m√°s a ti. El 14 de febrero te di chocolates, pero lo que realmente quer√≠a darte era un pedacito de mi alma que empezaba a enamorarse en silencio. No sab√≠a si te imaginabas lo que yo ya sent√≠a, pero esperaba que ese detalle te dijera, aunque fuera en susurros: <strong>‚ÄúMe importas. Mucho.‚Äù</strong> Aquel peque√±o regalo fue el primer paso de muchos, el primer latido que te perteneci√≥." },
            { title: "‚ú® Marzo 2024", text: "En marzo reun√≠ valor y te entregu√© una pulserita de plata‚Ä¶ pero en realidad quer√≠a entregarte algo m√°s profundo: <strong>la pureza de mis intenciones</strong>. Esa pulsera brillaba como t√∫, delicada pero fuerte, hermosa sin esfuerzo. Y mientras la ten√≠as en tus manos, yo solo pensaba: ‚ÄúOjal√° un d√≠a pueda tomar tu mano y nunca soltarla.‚Äù Ese regalo fue mi manera silenciosa de decirte que quer√≠a cuidarte, acompa√±arte y construir algo bonito contigo." },
            { title: "üíç Abril 2024", text: "El 6 de abril se convirti√≥ en uno de los d√≠as m√°s importantes de mi vida: <strong>nos hicimos novios</strong>. Ese s√≠ que nos dimos abri√≥ un mundo que todav√≠a seguimos descubriendo juntos. Ese d√≠a no solo te eleg√≠‚Ä¶ te reconoc√≠. Reconoc√≠ que eras la mujer que mi coraz√≥n llevaba tiempo buscando sin saberlo. Desde entonces, cada d√≠a contigo ha sido un recordatorio de que el amor verdadero existe, y yo lo encontr√© en ti." },
            { title: "üå∫ Mayo 2024", text: "Mayo fue un mes suave, lleno de descubrimientos peque√±os pero profundos. Aprend√≠ tus gestos, la forma en que inclinas la cabeza cuando algo te da risa, la manera en que tus ojos brillan cuando est√°s feliz. Me enamor√© de tus detalles, de tus palabras, de tus silencios. Me di cuenta de que amar no es solo sentir‚Ä¶ <strong>es conocer, respetar, cuidar y elegir cada d√≠a</strong>. Y yo te eleg√≠ en mayo, igual que te elijo hoy." },
            { title: "üå§ Junio 2024", text: "Junio trajo tardes tranquilas, momentos simples que se convert√≠an en tesoros. Contigo descubr√≠ que no hacen falta grandes planes para sentir felicidad; basta con tenerte cerca. A tu lado, incluso el silencio se siente c√≥modo, dulce, perfecto. Ese mes entend√≠ que cuando se ama de verdad, <strong>la vida encuentra nuevas formas de brillar</strong>." },
            { title: "üå∑ Julio 2024", text: "Julio fue un jard√≠n de recuerdos. Peque√±os momentos que parec√≠an normales, pero que con el tiempo se convirtieron en semillas de una historia profunda. Cada sonrisa tuya se quedaba guardada en mi alma, cada abrazo me ense√±aba que hab√≠a encontrado mi refugio. Ese mes supe que <strong>ya no pod√≠a imaginar mi vida sin ti</strong>." },
            { title: "üéÇ Agosto 2024", text: "El 5 de agosto, tu cumplea√±os, marc√≥ uno de mis d√≠as favoritos del a√±o. Quer√≠a que ese d√≠a sintieras cu√°n valiosa eres, lo mucho que iluminas mi mundo, lo afortunado que me siento de llamar ‚Äúmi novia‚Äù a una mujer tan maravillosa como t√∫. Ese d√≠a celebr√© que existes, que sonr√≠es, que sue√±as‚Ä¶ y sobre todo, <strong>que est√°s conmigo</strong>." },
            { title: "üíû Septiembre 2024", text: "En septiembre te entregu√© un anillo, s√≠mbolo de algo profundo y honesto. No era un simple regalo. Era una promesa silenciosa de mi coraz√≥n: <strong>‚ÄúEstoy contigo. Te elijo. Te valoro. Te cuido.‚Äù</strong> Cuando lo pusiste en tu dedo, sent√≠ que nuestro amor tomaba fuerza, que avanzaba hacia algo hermoso, grande y verdadero. Ese anillo no es solo un objeto: es <strong>nuestro cap√≠tulo eterno</strong>." },
            { title: "üçÅ Octubre 2024", text: "Octubre tuvo conversaciones importantes, momentos de comprensi√≥n, aprendizajes compartidos. Fue un mes que nos hizo crecer. Porque el amor real no solo es romanticismo, tambi√©n es apoyarse, hablar, escuchar, mejorar. Y nosotros lo hicimos, juntos, como un <strong>equipo que nada puede romper</strong>." },
            { title: "üåß Noviembre 2024", text: "El 28 de noviembre, mi cumplea√±os, se sinti√≥ distinto‚Ä¶ porque <strong>t√∫ estabas ah√≠</strong>. Todo fue m√°s bonito, m√°s c√°lido, m√°s m√≠o. Tu presencia hizo que el d√≠a se sintiera especial sin necesidad de nada m√°s. Ese mes entend√≠ que el <strong>mejor regalo de mi vida eres t√∫</strong>." },
            { title: "üéÑ Diciembre 2024", text: "Diciembre lleg√≥ con luces, abrazos y un amor que ya hab√≠a echado ra√≠ces profundas. Ese mes sent√≠ que no era solo un fin de a√±o‚Ä¶ era el inicio de un futuro contigo. Mirarte en diciembre fue entender que quiero <strong>todos mis diciembres a tu lado</strong>." },
            { title: "üåÖ Enero 2025", text: "El 28 de enero de 2025 celebramos un a√±o desde que te conoc√≠. Un a√±o desde que el destino me bendijo contigo. Recordar ese primer encuentro mientras te ten√≠a entre mis brazos era una sensaci√≥n indescriptible. Un a√±o lleno de amor, crecimiento, compromiso, sue√±os y lucha juntos. Un a√±o que solo fue el <strong>pr√≥logo de todo lo que nos falta vivir</strong>." },
            { title: "üíó Febrero 2025", text: "Febrero no necesit√≥ chocolates ni regalos esta vez‚Ä¶ porque <strong>t√∫ ya eras mi regalo diario</strong>. Ese mes comprend√≠ que nuestro amor hab√≠a madurado, que ya √©ramos un nosotros s√≥lido, fuerte, decidido. Cada abrazo tuyo se convirti√≥ en un lugar donde quiero quedarme siempre." },
            { title: "üå∏ Marzo 2025", text: "Marzo volvi√≥ a traer el recuerdo de aquella pulserita de plata, pero esta vez nuestro amor era m√°s profundo, m√°s sereno, m√°s real. Mirarte ahora y recordar ese comienzo me hizo sentir orgullo: <strong>hemos crecido, hemos avanzado, nos hemos sostenido</strong>. Y yo cada d√≠a te amo m√°s." },
            { title: "üíû Abril 2025", text: "El 6 de abril de 2025 celebramos <strong>un a√±o de ser novios</strong>. Doce meses de elegirnos, de cuidarnos, de luchar y de re√≠r. Un a√±o donde tu amor fue mi motor y mi paz. Ese d√≠a confirm√© que quiero que <strong>todos mis futuros lleven tu nombre</strong>." },
            { title: "üåª Mayo 2025", text: "En mayo, m√°s que nunca, quise demostr√°rtelo todo: que estoy contigo, que te apoyo, que te cuido, que no importa lo que pase, <strong>siempre voy a estar a tu lado</strong>. Ese mes te am√© con hechos, no solo con palabras." },
            { title: "üåô Junio 2025", text: "Junio fue un mes suave, como una caricia. Las noches contigo se sent√≠an eternas, los momentos simples se volv√≠an valiosos, y cada instante era una prueba silenciosa de que <strong>eres mi hogar</strong>." },
            { title: ‚òÄÔ∏è Julio 2025", text: "En julio volv√≠ a admirarte como si fuera la primera vez. Tu fuerza, tu ternura, tu forma de enfrentar la vida‚Ä¶ todo en ti me inspira. Ese mes entend√≠ que no solo te amo: <strong>te respeto, te valoro y te admiro profundamente</strong>." },
            { title: "üéÇ Agosto 2025", text: "El 5 de agosto volvi√≥ a llenarme de alegr√≠a. Verte cumplir a√±os es ver crecer la mujer que amo, la persona que quiero cuidar toda mi vida. Mi deseo siempre ser√° el mismo: que sigas brillando, creciendo, sonriendo‚Ä¶ y que <strong>yo pueda estar ah√≠ para celebrarlo contigo</strong>." },
            { title: "üçÇ Septiembre 2025", text: "Septiembre record√≥ aquel anillo de 2024. Lo miro y siento orgullo, porque seguimos juntos, luchando, creciendo, confirmando con cada d√≠a que el amor es un <strong>camino que elegimos con el coraz√≥n</strong>." },
            { title: "üçÅ Octubre 2025", text: "En octubre comprend√≠ que no importa cu√°nta tormenta haya afuera, a tu lado siempre hay calma. T√∫ eres mi paz, mi refugio, mi lugar favorito del mundo." },
            { title: "üéâ Noviembre 2025", text: "El 28 de noviembre volv√≠ a celebrar mi vida contigo a mi lado. Y cada a√±o que pasa me convenzo m√°s: nacieron muchas personas, pero solo una era para m√≠. Y <strong>esa eres t√∫</strong>." },
            { title: "‚ú® Diciembre 2025", text: "Hoy, mientras lees esto, quiero que recuerdes algo: cada mes contigo ha sido un poema vivo, y t√∫ eres la protagonista de la historia m√°s hermosa que he vivido. <strong>Eres mi mundo, mi sue√±o, mi destino</strong>. La mujer a la que amo con cada parte de m√≠. Y todo lo que soy, lo pongo a tus pies." }
        ];
        
        const calculatedTotalPages = pageContent.length;
        let pages = []; 


        // --- Funciones de Utilidad ---

        // Genera el HTML de una p√°gina
        function createPageElement(index, content) {
            const div = document.createElement('div');
            // Clase de transici√≥n ajustada a la duraci√≥n del volteo
            div.className = 'page absolute top-0 left-0 transition-all duration-[1s] ease-in-out';
            div.style.zIndex = calculatedTotalPages - index; // Z-index para orden apilado
            div.setAttribute('data-index', index);
            
            // Flexbox permite que el contenedor de contenido se ajuste autom√°ticamente para evitar desbordes
            div.innerHTML = `
                <h3 class="page-title">${content.title}</h3>
                <div class="page-content-scroll page-content-container overflow-y-auto pr-2">
                    <p class="text-gray-700">${content.text}</p>
                </div>
                <!-- El n√∫mero de p√°gina es absoluto para no interferir con el c√°lculo de altura del contenido -->
                <div class="absolute bottom-3 right-3 text-[#A88C6E] text-xs font-mono">P√°g. ${index + 1}</div>
            `;
            return div;
        }

        // Inicializa y renderiza todas las p√°ginas
        function initializePages() {
            pagesBlock.innerHTML = ''; 
            pages = []; 

            pageContent.forEach((content, index) => {
                const page = createPageElement(index, content);
                pages.push(page);
                pagesBlock.appendChild(page);
            });
            
            if (pages.length > 0) {
                pages[0].classList.add('active'); 
            }

            updatePageIndicator(calculatedTotalPages);
            updateNavigationButtons(calculatedTotalPages);
            
            if (!isBookOpen) {
                pagesBlock.classList.add('hidden-pages');
                navigationControls.classList.add('opacity-0', 'pointer-events-none');
            }
        }

        // Actualiza el indicador de p√°gina (ej. P√°g. 3 / 24)
        function updatePageIndicator(total) {
            pageIndicator.textContent = `P√°g. ${currentPageIndex + 1} / ${total}`;
        }

        // Actualiza el estado de los botones de navegaci√≥n
        function updateNavigationButtons(total) {
            prevPageBtn.disabled = currentPageIndex === 0;
            nextPageBtn.disabled = currentPageIndex === total - 1;
        }

        // Reproduce un sonido de "pasar p√°gina"
        function playPageTurnSound() {
            if (pageTurnSound) {
                pageTurnSound.currentTime = 0; 
                pageTurnSound.play().catch(e => console.log("No se pudo reproducir el sonido:", e.message));
            }
        }
        
        // --- L√≥gica Principal del Libro ---

        // Abre o cierra el libro
        function toggleBook() {
            isBookOpen = !isBookOpen;

            if (isBookOpen) {
                // ABRIR libro
                bookContainer.classList.add('open');
                coverFront.classList.add('flipped'); 
                toggleBookBtn.textContent = 'Cerrar Libro';
                
                // Mostrar p√°ginas y controles (despu√©s de que la portada inicie el flip)
                setTimeout(() => {
                    pagesBlock.classList.remove('hidden-pages');
                    navigationControls.classList.remove('opacity-0', 'pointer-events-none');
                    
                    pages.forEach((page, index) => {
                        page.classList.remove('flipped', 'prev-flipped', 'active');
                        if (index === currentPageIndex) {
                            page.classList.add('active');
                        }
                    });
                    for (let i = 0; i < currentPageIndex; i++) {
                         pages[i].classList.add('prev-flipped');
                    }
                    updateNavigationButtons(calculatedTotalPages);
                }, 1500); 

            } else {
                // CERRAR libro
                coverFront.classList.remove('flipped'); 
                bookContainer.classList.remove('open');
                toggleBookBtn.textContent = 'Abrir Libro';

                // Ocultar controles y bloque de p√°ginas
                navigationControls.classList.add('opacity-0', 'pointer-events-none'); 
                pagesBlock.classList.add('hidden-pages');

                // Reiniciar el estado de la p√°gina al cerrar, para que al abrirlo se vea la primera p√°gina
                currentPageIndex = 0;
                pages.forEach(page => page.classList.remove('flipped', 'prev-flipped', 'active'));
                if (pages.length > 0) {
                    pages[0].classList.add('active');
                }
                updatePageIndicator(calculatedTotalPages);
                updateNavigationButtons(calculatedTotalPages);
            }
        }

        // Pasa a la p√°gina siguiente
        function nextPage() {
            if (currentPageIndex < calculatedTotalPages - 1) {
                const currentPage = pages[currentPageIndex];
                
                playPageTurnSound();
                
                currentPage.classList.remove('active');
                currentPage.classList.add('flipped');

                currentPageIndex++;
                const newPage = pages[currentPageIndex];
                
                newPage.classList.remove('flipped', 'prev-flipped');
                newPage.classList.add('active');

                updatePageIndicator(calculatedTotalPages);
                updateNavigationButtons(calculatedTotalPages);
            }
        }

        // Retrocede a la p√°gina anterior
        function prevPage() {
            if (currentPageIndex > 0) {
                const currentPage = pages[currentPageIndex];
                
                playPageTurnSound();
                
                currentPage.classList.remove('active');

                currentPageIndex--;
                const newPage = pages[currentPageIndex];

                // Mueve la p√°gina actual (la que se est√° dejando) a 'prev-flipped'
                currentPage.classList.remove('flipped');
                currentPage.classList.add('prev-flipped'); 

                // La nueva p√°gina (anterior) se convierte en activa
                newPage.classList.remove('flipped', 'prev-flipped');
                newPage.classList.add('active');
                
                updatePageIndicator(calculatedTotalPages);
                updateNavigationButtons(calculatedTotalPages);
            }
        }

        // --- Inicializaci√≥n ---
        window.onload = () => {
            initializePages();
            
            // Efecto de inclinaci√≥n sutil al pasar el rat√≥n
            bookContainer.addEventListener('mouseenter', () => {
                if (!isBookOpen) { 
                    bookContainer.style.transform = 'rotateY(-2deg) rotateX(1deg)';
                }
            });

            bookContainer.addEventListener('mouseleave', () => {
                if (!isBookOpen) {
                    bookContainer.style.transform = 'rotateY(0deg) rotateX(0deg)';
                }
            });
        };
        
        // Exponer funciones al scope global para los botones
        window.toggleBook = toggleBook;
        window.nextPage = nextPage;
        window.prevPage = prevPage;

    </script>
</body>
</html>